name: recipe
help: Store files/templates in a recipe book to use them anytime, anywhere
version: 0.1.0

environment_variables:
- name: editor
  help: Editor to use for interactive commands
  default: vim

- name: recipe_book_dir
  help: Directories used to store recipes
  default: ${HOME}/recipe-book

dependencies:
- git
- fd
- gum

commands:
- name: add
  help: Add a new recipe

  args:
  - name: name
    required: true
    help: Name of the new recipe
    validate: recipe_missing

  flags:
  - long: --from
    short: -f
    arg: file
    help: Use the following file for this recipe
    validate: file_exists

  examples:
    - recipe add docker/express-js
    - recipe add ssh-config -f ~/.ssh/config

- name: list
  alias: ls
  help: List all your recipes

  examples:
  - recipe list

- name: git
  help: Access git from your recipe book

  catch_all:
    label: COMMAND
    help: Command to run inside the recipe book
    required: true

  examples:
  - recipe git log
  - recipe git remote add origin <repo>

- name: use
  help: Use a recipe localy

  args:
  - name: name
    help: Name of the recipe
    validate: recipe_exists

  flags:
  - short: -d
    long: --destination
    arg: destination
    help: Destination path for the recipe

  examples:
  - recipe use
  - recipe use ssh-config -d ~/.ssh/config

- name: remove
  alias: rm
  help: Remove a recipe

  args:
    - name: name
      help: Name of the recipe to remove
      validate: recipe_exists

  flags:
    - short: -y
      long: --yes
      help: Do not ask for confirmation

  examples:
    - recipe remove
    - recipe remove ssh-config --yes

- name: edit
  help: Edit a recipe

  args:
    - name: name
      help: Name of the recipe to edit
      validate: recipe_exists

  examples:
    - recipe edit
    - recipe edit ssh-config

- name: clone
  help: Clone a remote git repository

  args:
    - name: url
      help: Remote repository url
      required: true

  flags:
    - short: -y
      long: --yes
      help: Do not ask for confirmation

  examples:
    - 'recipe clone git@github:awesome-user/recipe-book.git --yes'

- name: link
  help: Create a symbolic link to the recipe executable

  args:
    - name: path
      help: Path to the symbolic link
      default: ${HOME}/.local/bin

  flags:
    - short: -r
      long: --remove
      help: Remove the symbolic link instead

    - short: -s
      long: --source
      arg: source
      help: |-
        Path to the directory containing the recipe script
        It overwrites the RECIPE_DIR variable

  environment_variables:
    - name: recipe_dir
      help: Directory containing the recipe script
      default: ${HOME}/.recipe

  examples:
    - recipe link /usr/local/bin
    - recipe link --source ~/scripts/recipe --remove

- name: show
  help: Show the content of a recipe

  args:
    - name: name
      help: Name of the recipe
      validate: recipe_exists

  flags:
    - short: -c
      long: --command
      help: |-
        Command used to print the recipe
        It overwrites the RECIPE_SHOW_COMMAND variable
      arg: executable

  environment_variables:
    - name: recipe_show_command
      help: Executable used by the recipe show command
      default: cat

  examples:
    - recipe show
    - recipe show docker/express-js --command bat
